{"version":3,"sources":["../../src/services/contact.ts","../../node_modules/@angular/core/@angular lazy","../../src/services/index.ts","../../src lazy","../../src/services/socket.ts","../../src/services/call.ts","../../src/services/audio.ts","../../src/services/video.ts","../../src/pages/index.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/components/index.ts","../../src/app/app.component.ts","../../src/pages/account/account.ts","../../ws (ignored)","../../src/services/chat.ts","../../src/services/login.ts","../../src/services/attachment.ts","../../src/pages/chats/chats.ts","../../src/pages/login/login.ts","../../src/pages/chat/chat.ts","../../src/components/call-modal/call-modal.ts","../../src/components/contact-modal/contact-modal.ts","../../src/components/contact-add-modal/contact-add-modal.ts","../../src/components/user-image/user-image.ts","../../src/components/call-modal/call-modal-trigger.ts","../../src/components/keyboard-attach/keyboard-attach.ts","../../src/pages/contacts/contacts.ts","../../node_modules/moment/locale ^/.//.*$","../../src/app/config.ts"],"names":[],"mappings":"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IAC5E,CAAC;IAEF,mBAAC;AAAD,CAAC;AAxCY,YAAY;IAJxB,gEAAS,CAAC;QACV,QAAQ,EAAE,eAAe;OACG;KAC5B,CAAC;iBAG0L;AAsC3L;SAxCY,YAAY,e;;;;;;;ACZzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wB;;;;;;;;;;;;;;;;AC5P0C;AAG1C,IAAa,MAAM;IAAnB;IAgCA,CAAC;IAAD,aAAC;AAAD,CAAC;AA9BA,yBAAyB;AACzB,6EAA6E;AAC7E,0EAA0E;AAC5D,aAAM,GAAG,2BAA2B,CAAC;AAEnD,2DAA2D;AAC7C,YAAK,GAAG,IAAI,CAAC;AAE3B,mDAAmD;AACrC,UAAG,GAAG;IACnB;QACC,IAAI,EAAE,8BAA8B;KACpC,EAAE;QACF,IAAI,EAAE,gCAAgC;KACtC,EAAE;QACF,IAAI,EAAE,uBAAuB;QAC7B,QAAQ,EAAE,kBAAkB;QAC5B,UAAU,EAAE,MAAM;KAClB,EAAE;QACF,IAAI,EAAE,uBAAuB;QAC7B,QAAQ,EAAE,kBAAkB;QAC5B,UAAU,EAAE,MAAM;KAClB;CACD,CAAC;AACF,kCAAkC;AAClC,wGAAwG;AAC1F,kBAAW,GAAG,IAAI,CAAC;AAEjC,iDAAiD;AACnC,eAAQ,GAAG,IAAI,CAAC;AA/BlB,MAAM;IADlB,gEAAS,CAAC,EAAE,CAAC;GACD,MAAM,CAgClB;AAhCkB","file":"main.js","sourcesContent":["// manages contacts\n\nimport { Injectable, ApplicationRef } from '@angular/core';\nimport { SocketService } from './';\nimport { Events } from 'ionic-angular';\n\n@Injectable()\nexport class ContactService {\n\tcontacts = []\n\tpublic user = null\n\n\t// manages contacts online status\n\tconstructor(private ref: ApplicationRef, public socket: SocketService, public events: Events) {\n\t\t// triggered when a contact comes online\n\t\tthis.socket.on('online', contact => {\n\t\t\tcontact.online = true;\n\t\t\tthis.setOnlineUsers([contact]);\n\t\t});\n\n\t\t// triggered when a contact goes offline\n\t\tthis.socket.on('offline', contact => {\n\t\t\tcontact.online = false;\n\t\t\tthis.setOnlineUsers([contact]);\n\t\t});\n\n\t\t// triggered when we request new contacts\n\t\tthis.socket.on('contacts', contacts => {\n\t\t\tconsole.debug('Contacts: ', contacts)\n\t\t\tthis.setOnlineUsers(contacts);\n\t\t});\n\n\t\t// triggered after a successfull login\n\t\tthis.events.subscribe('user.login', data => {\n\t\t\tthis.user = data.user;\n\t\t});\n\n\t\t// triggeres after a logout event\n\t\t// note: this does not break the socket connection\n\t\tthis.events.subscribe('user.logout', () => {\n\t\t\tthis.user = null;\n\t\t});\n\t}\n\n\t// set online users\n\tprivate setOnlineUsers(contacts) {\n\t\tconsole.log('SET ONLINE USERS', this, contacts, this.user);\n\n\t\t// i think this happens when user is notified that they are online and we havent recieved the login thing yet\n\t\tif (!this.user) {\n\t\t\tconsole.error('No user yet for contats');\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var x in contacts) {\n\t\t\tif (contacts[x].id == this.user.id) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvar add = true;\n\t\t\tfor (var xx in this.contacts) {\n\t\t\t\tif (this.contacts[xx].id == contacts[x].id) {\n\t\t\t\t\t// dont overwirte fields with empty data\n\t\t\t\t\tfor (var xxx in contacts[x]) {\n\t\t\t\t\t\tthis.contacts[xx][xxx] = contacts[x][xxx];\n\t\t\t\t\t}\n\t\t\t\t\tadd = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (add) {\n\t\t\t\tthis.contacts.push(contacts[x]);\n\t\t\t}\n\t\t}\n\t\tthis.contacts.sort(this.sortContacts);\n\t\tconsole.debug('Contacts: ', this.contacts)\n\t\tthis.ref.tick();\n\t};\n\n\t// sort contacts by online and last message\n\tprivate sortContacts(a, b) {\n\t\tif (!a) {\n\t\t\treturn -1;\n\t\t}\n\t\tif (!b) {\n\t\t\treturn 1;\n\t\t}\n\t\tif (a.online > b.online) {\n\t\t\treturn -1;\n\t\t}\n\t\tif (a.online < b.online) {\n\t\t\treturn 1;\n\t\t}\n\t\tif (new Date(a.lastDate) > new Date(b.lastDate)) {\n\t\t\treturn -1;\n\t\t}\n\t\tif (new Date(a.lastDate) < new Date(b.lastDate)) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t};\n\n\t// get a contact and its details\n\tpublic get(id) {\n\t\tconsole.debug('getting contact on logout', id, this.user.id)\n\t\tif (id == this.user.id) {\n\t\t\treturn this.user;\n\t\t}\n\t\tfor (let contact of this.contacts) {\n\t\t\tif (contact.id == id) {\n\t\t\t\treturn contact;\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tid: id\n\t\t};\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/contact.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 122;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/@angular lazy\n// module id = 122\n// module chunks = 0","export * from './socket';\nexport * from './call';\nexport * from './contact';\nexport * from './video';\nexport * from './chat';\nexport * from './audio';\nexport * from './login';\nexport * from './attachment';\n\n\n// WEBPACK FOOTER //\n// ./src/services/index.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 163;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 163\n// module chunks = 0","// handle socket io connections\n\nimport { Injectable } from '@angular/core';\nimport { Config } from '../app/config';\nimport * as io from 'socket.io-client';\n\n@Injectable()\nexport class SocketService {\n\tsocket = null;\n\n\tconstructor() {\n\t\t// connect to our server\n\t\t// change this url here\n\t\tthis.socket = io.connect(Config.server);\n\t}\n\n\t// generate a unique custom request id\n\tprivate makeId(len) {\n\t\tvar text = '';\n\t\tvar possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$';\n\t\tfor (var i = 0; i < (len || 10); i++) {\n\t\t\ttext += possible.charAt(Math.floor(Math.random() * possible.length));\n\t\t}\n\t\treturn text;\n\t}\n\n\t// send an event and get a response back\n\tpublic promise(eventName, request) {\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\tvar success = response => {\n\t\t\t\tconsole.debug(eventName + '|' + request.responseName + ': complete!');\n\t\t\t\tthis.socket.removeListener(request.responseName, success);\n\t\t\t\tresolve(response);\n\t\t\t};\n\n\t\t\trequest.responseName = '$response$' + this.makeId(10) + '$';\n\t\t\tconsole.debug(eventName + '|' + request.responseName + ': Sending socket promise...');\n\t\t\tthis.socket.on(request.responseName, success);\n\t\t\tthis.socket.emit(eventName, request);\n\t\t});\n\t}\n\n\tpublic emit(...args: any[]) {\n\t\tthis.socket.emit(...args)\n\t\t// @BUG\n\t\t//this.socket.emit(args[0], args[1]);\n\t}\n\n\tpublic on(name, data) {\n\t\tthis.socket.on(name, data);\n\t}\n\n\tpublic removeListener(name, data) {\n\t\tthis.socket.removeListener(name, data);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/socket.ts","// handles incoming and outgoing video calls\n\nimport { Injectable, ApplicationRef } from '@angular/core';\nimport { SocketService} from './socket';\nimport { AudioService} from './audio';\nimport { ContactService } from './contact';\nimport { VideoService } from './video';\nimport { Config } from '../app/config';\nimport { Platform } from 'ionic-angular';\nimport { Events, ModalController } from 'ionic-angular';\nimport { DomSanitizer } from '@angular/platform-browser';\n\ndeclare var\n\tcordova:any,\n\twindow:any,\n\tRTCSessionDescription:any,\n\tRTCPeerConnection:any,\n\tRTCIceCandidate:any;\n\n@Injectable()\nexport class CallService {\n\tmaxTimer = 200000\n\tfacing = 'front'\n\tpickupTimeout = null\n\tcontact = null\n\tisInCall = false\n\tisCalling = false\n\tisAnswering = false\n\t//duplicateMessages\n\tmuted = false\n\tlastState = null\n\tlocalStream = null\n\tpeerConnection = null\n\tremoteVideo = null\n\tlocalVideo = null\n\tpeerConnectionConfig = null\n\tmodalShowing = false\n\tmodal = null\n\n\n\tconstructor(private ref:ApplicationRef, private sanitizer:DomSanitizer, private events: Events, public modalCtrl: ModalController, public socket: SocketService, public platform: Platform, private audio: AudioService, public contactService: ContactService, public video: VideoService) {\n\t\t// browser compatability for web views\n\n\t\twindow.RTCPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;\n\t\twindow.RTCIceCandidate = window.RTCIceCandidate || window.mozRTCIceCandidate || window.webkitRTCIceCandidate;\n\t\twindow.RTCSessionDescription = window.RTCSessionDescription || window.mozRTCSessionDescription || window.webkitRTCSessionDescription;\n\n\t\t// STUN/TURN ice servers for connection negotiation\n\t\tthis.peerConnectionConfig = {\n\t\t\t'iceServers': Config.ice\n\t\t};\n\n\t\tthis.socket.on('messageReceived', (name, message) => {\n\n\t\t\tconsole.debug('Message', message);\n\n\t\t\tswitch (message.type) {\n\t\t\t\tcase 'call':\n\t\t\t\t\tconsole.debug('incoming call...', message);\n\n\t\t\t\t\tif (this.isCalling) {\n\t\t\t\t\t\t// we are trying to call eachother. just answer it automaticly\n\t\t\t\t\t\tif (this.contact.id == name) {\n\t\t\t\t\t\t\tclearTimeout(this.pickupTimeout);\n\t\t\t\t\t\t\tthis.pickupTimeout = null;\n\t\t\t\t\t\t\tthis.isCalling = false;\n\t\t\t\t\t\t\tthis.isAnswering = true;\n\t\t\t\t\t\t\tthis.answer();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// ignore this incoming call if we are busy\n\t\t\t\t\t\tthis.ignore(false, name);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.audio.play('calling');\n\n\t\t\t\t\tthis.pickupTimeout = setTimeout(() => {\n\t\t\t\t\t\tconsole.log('Call took too long to pick up. Ending.');\n\t\t\t\t\t\tthis.end();\n\t\t\t\t\t}, this.maxTimer);\n\n\t\t\t\t\t// start a new call\n\t\t\t\t\tthis.contact = this.contactService.get(name);\n\t\t\t\t\tthis.isAnswering = true;\n\t\t\t\t\tthis.showModal();\n\t\t\t\t\tthis.preview();\n\t\t\t\t\tthis.refreshVideos();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'answer':\n\t\t\t\t\tclearTimeout(this.pickupTimeout);\n\t\t\t\t\tthis.pickupTimeout = null;\n\n\t\t\t\t\tthis.isInCall = true;\n\t\t\t\t\tthis.isCalling = false;\n\t\t\t\t\tthis.refreshVideos();\n\n\t\t\t\t\tthis.call(true, this.contact.id);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ignore':\n\t\t\t\tcase 'cancel':\n\t\t\t\t\tthis.end();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'end':\n\t\t\t\t\tif (this.isInCall || this.isCalling || this.isAnswering) {\n\t\t\t\t\t\tthis.end();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n/*\n\t\t\t\tcase 'phonertc_handshake':\n\t\t\t\t\tif (duplicateMessages.indexOf(message.data) === -1) {\n\t\t\t\t\t\tthis.Contact[name].receiveMessage(JSON.parse(message.data));\n\t\t\t\t\t\tduplicateMessages.push(message.data);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n*/\n\n\t\t\t}\n\n\n\n\n\t\t\tif (message.sdp) {\n\t\t\t\tthis.peerConnection.setRemoteDescription(new RTCSessionDescription(message.sdp), () => {\n\t\t\t\t\tif (message.sdp.type == 'offer') {\n\t\t\t\t\t\tthis.peerConnection.createAnswer(d => {\n//\t\t\t\t\t\t\tthis.gotDescription.call(this, [d]);\n\t\t\t\t\t\t\tthis.gotDescription(d);\n\t\t\t\t\t\t}, e => {\n\t\t\t\t\t\t\tconsole.log('error creating answer', e);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (message.ice) {\n\t\t\t\tthis.peerConnection.addIceCandidate(new RTCIceCandidate(message.ice));\n\t\t\t}\n\t\t});\n\t}\n\n\t// place a new call\n\tpublic triggerCall(contact) {\n\t\tthis.audio.play('calling');\n\t\tthis.showModal();\n\t\tif (this.isInCall) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.preview();\n\n\t\tthis.pickupTimeout = setTimeout(() => {\n\t\t\tconsole.log('Call took too long to pick up. Ending.');\n\t\t\tthis.end();\n\t\t}, this.maxTimer);\n\n\t\tconsole.debug('calling ', contact);\n\t\tthis.contact = this.contactService.get(contact);\n\t\tthis.isCalling = true;\n\t\tthis.socket.emit('sendMessage', contact, {\n\t\t\ttype: 'call'\n\t\t});\n\t}\n\n\t// open the call modal\n\tshowModal() {\n\t\tthis.events.publish('call.trigger.show', this.contact);\n\t\tthis.modalShowing = true;\n\t};\n\n\tprivate gotDescription(description) {\n\t\tconsole.log('got description', description, this.contact);\n\t\tthis.peerConnection.setLocalDescription(description, () => {\n\t\t\tthis.socket.emit('sendMessage', this.contact.id, {\n\t\t\t\t'sdp': description\n\t\t\t});\n\t\t}, e => {\n\t\t\tconsole.log('set description error', e)\n\t\t});\n\t}\n\n\tprivate gotIceCandidate(event) {\n\t\tif (event.candidate != null) {\n\t\t\tthis.socket.emit('sendMessage', this.contact.id, {\n\t\t\t\t'ice': event.candidate\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate gotRemoteStream(event) {\n\t\tconsole.log('got remote stream');\n\t\tthis.remoteVideo = this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(event.stream));\n\t\tthis.refreshVideos();\n\t}\n\n\t// a hacky way to make sure we get the latest video position reguardless of animations or transitions\n\t// another way might be to use iosrtc.observeVideo(video) or an $interval\n\trefreshVideos() {\n\t\t// tell the modal that we need to revresh the video\n\t\tthis.ref.tick();\n\n\t\tif (!this.platform.is('cordova')) {\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tfor (var x = 0; x <= 3000; x+=300) {\n\t\t\t\tconsole.log(x)\n\t\t\t\tsetTimeout(cordova.plugins.iosrtc.refreshVideos,x);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log(e);\n\t\t}\n\t};\n\n\thideModal() {\n\t\tthis.events.publish('call.trigger.hide', true);\n\t}\n\n\t// end the call in either direction\n\tend() {\n\t\tif (this.peerConnection) {\n\t\t\tthis.peerConnection.close();\n\t\t}\n\n\t\tthis.localVideo = null;\n\t\tthis.remoteVideo = null;\n\t\tthis.isAnswering = false;\n\t\tthis.isCalling = false;\n\t\tthis.isInCall = false;\n\t\tthis.localStream = null;\n\n\t\tthis.video.disconnect().then(() => {\n\t\t\tthis.hideModal();\n\t\t\tthis.refreshVideos();\n\t\t});\n\n\t\tif (!this.contact) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.socket.emit('sendMessage', this.contact.id, {\n\t\t\ttype: 'end'\n\t\t});\n\t\tthis.contact = null;\n\t}\n\n\t// add local stream\n\taddStream(stream, timeout) {\n\t\tthis.localStream = stream;\n\t\tsetTimeout(() => {\n\t\t\tthis.localVideo = this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(stream));\n\t\t}, timeout);\n\t}\n\n\t// preview local video as full screen\n\tpreview() {\n\t\tthis.video.connect(true, true, this.facing).then(stream => {\n\t\t\tthis.addStream(stream, 10);\n\t\t});\n\t};\n\n\t// begin a call using webrtc\n\tcall(isInitiator, contactId) {\n\t\tconsole.log('calling ' + contactId + ', isInitiator: ' + isInitiator);\n\n\t\tvar connect = () => {\n\t\t\tthis.peerConnection = new RTCPeerConnection(this.peerConnectionConfig);\n\n\t\t\tthis.peerConnection.onicecandidate = this.gotIceCandidate.bind(this);\n\t\t\tthis.peerConnection.onaddstream = this.gotRemoteStream.bind(this);\n\t\t\tthis.peerConnection.oniceconnectionstatechange = event => {\n\t\t\t\tthis.lastState = event.target.iceConnectionState;\n\t\t\t\tconsole.debug('ice state', this.lastState);\n\t\t\t\tif (this.lastState === 'failed' || this.lastState === 'disconnected' || this.lastState === 'closed') {\n\t\t\t\t\tthis.peerConnection = null;\n\t\t\t\t\tthis.end();\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.peerConnection.addStream(this.localStream);\n\n\t\t\tif (isInitiator) {\n\t\t\t\t//this.isCalling = true;\n\t\t\t\tconsole.debug('creating offer');\n\t\t\t\tthis.peerConnection.createOffer(d => {\n\t\t\t\t\t//this.gotDescription.call(this, [d]);\n\t\t\t\t\tthis.gotDescription(d);\n\t\t\t\t}, e => {\n\t\t\t\t\tconsole.log('error creating offer', e)\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t//this.isAnswering = true;\n\t\t\t}\n\t\t};\n\n\t\tif (!this.localStream) {\n\t\t\tthis.video.connect(true, true, this.facing).then(stream => {\n\t\t\t\tthis.addStream(stream, 1000);\n\t\t\t\tconnect();\n\t\t\t});\n\t\t} else {\n\t\t\tconnect();\n\t\t}\n\t\t// session.on('sendMessage', data => {\n\t\t// \tSocket.emit('sendMessage', contact.id, {\n\t\t// \t\ttype: 'phonertc_handshake',\n\t\t// \t\tdata: JSON.stringify(data)\n\t\t// \t});\n\t\t// });\n\t\t//\n\t\t// this.Contact[contact.id] = session;\n\t\t//\n\t}\n\n\t// cancel a call being placed\n\tcancel() {\n\t\tthis.socket.emit('sendMessage', this.contact.id, {\n\t\t\ttype: 'cancel'\n\t\t});\n\t\tthis.end();\n\t};\n\n\t// ignore an incomming call\n\tignore(end, name) {\n\t\tthis.socket.emit('sendMessage', name || this.contact.id, {\n\t\t\ttype: 'ignore'\n\t\t});\n\t\tif (!end) return;\n\t\tthis.end();\n\t};\n\n\t// answer in incoming call\n\tanswer() {\n\t\tif (this.isInCall) {\n\t\t\treturn;\n\t\t}\n\n\t\tclearTimeout(this.pickupTimeout);\n\t\tthis.pickupTimeout = null;\n\n\t\tthis.isInCall = true;\n\t\tthis.isAnswering = false;\n\t\tthis.call(false, this.contact.id);\n\n\t\tsetTimeout(() => {\n\t\t\tthis.socket.emit('sendMessage', this.contact.id, {\n\t\t\t\ttype: 'answer'\n\t\t\t});\n\t\t});\n\t\tthis.refreshVideos();\n\t}\n\n\t// swap the camera facing. defaults to front facing to start\n\tflip() {\n\t\tthis.facing = this.facing == 'front' ? 'back' : 'front';\n\n\t\tthis.video.connect(!this.muted, true, this.facing).then(stream => {\n\t\t\tconsole.debug('using new facing stream', stream);\n\t\t\tthis.addStream(stream, 0);\n\t\t\tthis.peerConnection.addStream(this.localStream);\n\t\t});\n\t}\n\n\t// mute the microphone and attach a new stream to connection\n\t// note: doesnt seem to work quite right on all brwosers\n\tmute() {\n\t\tthis.muted = !this.muted;\n\t\tconsole.debug((this.muted ? '' : 'un') + 'muting...');\n\n\t\tif (this.muted) {\n\t\t\tthis.video.mute();\n\t\t} else {\n\t\t\tthis.video.unmute().then(stream => {\n\t\t\t\tconsole.debug('using muted stream', stream);\n\t\t\t\tthis.addStream(stream, 0);\n\t\t\t\tthis.peerConnection.addStream(this.localStream);\n\t\t\t});\n\t\t}\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/call.ts","// audio handler for native audio with fallback for html5 audio\n\nimport { Injectable } from '@angular/core';\nimport { Platform } from 'ionic-angular';\nimport { NativeAudio } from '@ionic-native/native-audio';\nimport { Config } from '../app/config';\n\n@Injectable()\nexport class AudioService {\n\tready = null;\n\taudio = []\n\tvolume = .4\n\n\tconstructor(public platform: Platform, public nativeAutio: NativeAudio) {\n\n\t\tthis.ready = new Promise((resolve, reject) => {\n\n\t\t\t// promise that only fires after all files have loaded\n\t\t\tplatform.ready().then(() => {\n\t\t\t\tlet files = ['login','message-received-back','message-received-front','message-sent','calling'];\n\t\t\t\tlet c = 1;\n\n\t\t\t\tif (this.platform.is('cordova')) {\n\t\t\t\t\tfiles.forEach(file => {\n\t\t\t\t\t\tnativeAutio.preloadComplex(file, 'assets/audio/' + file + '.mp3', this.volume, 1, 0).then(msg => {\n\t\t\t\t\t\t\tc++;\n\t\t\t\t\t\t\tif (c == files.length) {\n\t\t\t\t\t\t\t\tsetTimeout(resolve, 100);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, msg => {\n\t\t\t\t\t\t\treject('failed to load audio');\n\t\t\t\t\t\t\tconsole.debug('ERROR loading sound: ' + msg);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tfiles.forEach(file => {\n\t\t\t\t\t\tthis.audio[file] = new Audio('assets/audio/' + file + '.mp3');\n\t\t\t\t\t\tthis.audio[file].volume = this.volume;\n\t\t\t\t\t});\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tthis.ready.then(() => {\n\t\t\tconsole.debug('Audio initilized.');\n\t\t});\n\t}\n\n\t// play an audio clip\n\tpublic play(clip) {\n\t\tif (!Config.audio) {\n\t\t\treturn;\n\t\t}\n\t\t// this.ready.then(() => {\n\t\t// \tif (this.platform.is('cordova')) {\n\t\t// \t\tthis.nativeAudio.play(clip);\n\t\t// \t} else if (this.audio[clip]) {\n\t\t// \t\tthis.audio[clip].play();\n\t\t// \t}\n\t\t// });\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/audio.ts","// manages video elements\n\nimport { Injectable } from '@angular/core';\nimport { Platform } from 'ionic-angular';\nimport { Events } from 'ionic-angular';\n\ndeclare var navigator:any;\n\n\n@Injectable()\nexport class VideoService {\n\tlocalStream = null\n\tfacing = 'front'\n\n\tconstructor(public platform: Platform) {\n\t\tnavigator.getUserMedia = navigator.getUserMedia || navigator.mozGetUserMedia || navigator.webkitGetUserMedia;\n\t}\n\n\tconnect(audio, video, facing) {\n\t\tlet self = this;\n\t\tconsole.debug('getting stream', audio, video);\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar connect = () => {\n\t\t\t\tvar videoOptions = {\n\t\t\t\t\tdeviceId: null\n\t\t\t\t};\n\n\t\t\t\tif (this.platform.is('cordova') && this.platform.is('ios')) {\n\t\t\t\t\tif (facing == 'front') {\n\t\t\t\t\t\tvideoOptions.deviceId = 'com.apple.avfoundation.avcapturedevice.built-in_video:1';\n\t\t\t\t\t} else if (facing == 'back') {\n\t\t\t\t\t\tvideoOptions.deviceId = 'com.apple.avfoundation.avcapturedevice.built-in_video:0';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tnavigator.getUserMedia({\n\t\t\t\t\t\taudio: audio ? true : false,\n\t\t\t\t\t\tvideo: video ? videoOptions : false\n\t\t\t\t\t},\n\t\t\t\t\tstream => {\n\t\t\t\t\t\tconsole.log('got local MediaStream: ', stream, stream.getTracks());\n\t\t\t\t\t\tthis.localStream = stream;\n\t\t\t\t\t\tresolve(stream);\n\t\t\t\t\t},\n\t\t\t\t\terror => {\n\t\t\t\t\t\tconsole.error('getUserMedia failed: ', error);\n\t\t\t\t\t\treject();\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t};\n\t\t\tvar getDevices = () => {\n\t\t\t\tnavigator.mediaDevices.enumerateDevices().then(data => {\n\n\t\t\t\t});\n\t\t\t};\n\t\t\tif (this.localStream) {\n\t\t\t\tself.disconnect().then(connect);\n\t\t\t} else {\n\t\t\t\tconnect();\n\t\t\t}\n\t\t});\n\t}\n\n\t// get a list of devices\n\tdevices() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tnavigator.mediaDevices.enumerateDevices().then(devices => {\n\t\t\t\tresolve(devices);\n\t\t\t});\n\t\t});\n\t}\n\n\t// mute audio\n\t// @todo: make this reestablish a connection\n\tmute() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (this.localStream) {\n\t\t\t\tvar tracks = this.localStream.getAudioTracks();\n\t\t\t\tfor (var x in tracks) {\n\t\t\t\t\ttracks[x].enabled = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tresolve(this.localStream);\n\t\t});\n\t}\n\n\t// unmute audio\n\t// @todo: make this reestablish a connection\n\tunmute() {\n\t\tvar self = this;\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tself.connect(true, true, this.facing).then((stream) => {\n\t\t\t\tresolve(stream);\n\t\t\t});\n\t\t});\n\t}\n\n\t// disconnect the media stream\n\tdisconnect() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (this.localStream) {\n\t\t\t\tvar tracks = this.localStream.getTracks();\n\t\t\t\tfor (var x in tracks) {\n\t\t\t\t\ttracks[x].stop();\n\t\t\t\t}\n\t\t\t\tconsole.debug('stoping stream', this.localStream.getTracks());\n\t\t\t\tthis.localStream = null;\n\t\t\t}\n\t\t\tresolve();\n\t\t});\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/video.ts","export * from './account/account';\nexport * from './chats/chats';\nexport * from './login/login';\nexport * from './chat/chat';\nexport * from './contacts/contacts';\n\n\n// WEBPACK FOOTER //\n// ./src/pages/index.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { NgModule, ErrorHandler } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { IonicApp, IonicModule, IonicErrorHandler } from 'ionic-angular';\nimport { MyApp } from './app.component';\n\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { Keyboard } from '@ionic-native/keyboard';\nimport { NativeAudio } from '@ionic-native/native-audio';\nimport { IonicStorageModule } from '@ionic/storage';\nimport { HttpModule } from '@angular/http';\n\nimport { MomentModule } from 'angular2-moment';\n\nimport { ChatsPage, ChatPage, LoginPage, AccountPage, ContactsPage } from '../pages';\nimport { CallModal, ContactModal, UserImage, CallModalTrigger, ContactAddModal, KeyboardAttach } from '../components';\nimport { AttachmentService, AudioService, CallService, ChatService, ContactService, LoginService, SocketService, VideoService} from '../services';\n\n@NgModule({\n\tdeclarations: [\n\t\tMyApp,\n\t\tChatsPage,\n\t\tChatPage,\n\t\tLoginPage,\n\t\tAccountPage,\n\t\tCallModal,\n\t\tContactModal,\n\t\tUserImage,\n\t\tContactsPage,\n\t\tContactAddModal,\n\t\tKeyboardAttach\n\t],\n\timports: [\n\t\tBrowserModule,\n\t\tHttpModule,\n\t\tIonicModule.forRoot(MyApp, {\n\t\t\tbackButtonText: 'Back',\n\t\t\ticonMode: 'ios',\n \t\t\tmodalEnter: 'modal-slide-in',\n\t\t\tmodalLeave: 'modal-slide-out',\n\t\t\ttabsPlacement: 'bottom',\n\t\t\tpageTransition: 'ios'\n\t\t}),\n\t\tIonicStorageModule.forRoot(),\n\t\tMomentModule\n\t],\n\tbootstrap: [IonicApp],\n\tentryComponents: [\n\t\tMyApp,\n\t\tChatsPage,\n\t\tChatPage,\n\t\tLoginPage,\n\t\tAccountPage,\n\t\tCallModal,\n\t\tContactModal,\n\t\tUserImage,\n\t\tContactsPage,\n\t\tContactAddModal\n\t],\n\tproviders: [\n\t\tAttachmentService,\n\t\tCallModalTrigger,\n\t\tLoginService,\n\t\tAudioService,\n\t\tSocketService,\n\t\tCallService,\n\t\tContactService,\n\t\tVideoService,\n\t\tChatService,\n\t\tStatusBar,\n\t\tSplashScreen,\n\t\tKeyboard,\n\t\tNativeAudio,\n\t\t{provide: ErrorHandler, useClass: IonicErrorHandler}\n\t]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","export * from './call-modal/call-modal';\nexport * from './contact-modal/contact-modal';\nexport * from './contact-add-modal/contact-add-modal';\nexport * from './user-image/user-image';\nexport * from './call-modal/call-modal-trigger';\nexport * from './keyboard-attach/keyboard-attach';\n\n\n// WEBPACK FOOTER //\n// ./src/components/index.ts","import { Component, ViewChild } from '@angular/core';\nimport { Platform, NavController, Nav , ViewController, Events } from 'ionic-angular';\n\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\n\nimport { ChatsPage } from '../pages';\nimport { CallService } from '../services';\nimport { CallModalTrigger } from '../components';\n\n\nimport * as moment from 'moment';\n//import * as locales from 'moment/min/locales';\n\ndeclare var cordova:any;\n\n\n@Component({\n\ttemplateUrl: 'app.html'\n})\nexport class MyApp {\n\trootPage = ChatsPage;\n\tisInCall = false\n\n\tconstructor(platform: Platform, callService: CallService, events: Events, callModal: CallModalTrigger, statusBar: StatusBar, splashScreen: SplashScreen) {\n\n\n\t\t// format chat date diffs\n\t\tmoment.locale('en', {\n\t\t\trelativeTime: {\n\t\t\t\tfuture: 'now',\n\t\t\t\tpast: '%s',\n\t\t\t\ts: 'now',\n\t\t\t\tm: '1 m',\n\t\t\t\tmm: '%d m',\n\t\t\t\th: '1 h',\n\t\t\t\thh: '%d h',\n\t\t\t\td: '1 d',\n\t\t\t\tdd: '%d d',\n\t\t\t\tM: '1 m',\n\t\t\t\tMM: '%d m',\n\t\t\t\ty: '1 y',\n\t\t\t\tyy: '%d y'\n\t\t\t}\n\t\t});\n\n\t\tplatform.ready().then(() => {\n\t\t\tstatusBar.styleBlackTranslucent();\n\t\t\tsplashScreen.hide();\n\n\t\t\tif (platform.is('cordova') && cordova.plugins.iosrtc) {\n\t\t\t\tcordova.plugins.iosrtc.registerGlobals();\n\t\t\t}\n\t\t});\n\n\t\tevents.subscribe('call.status.isincall', status => {\n\t\t\tconsole.debug('call status changed to ', status);\n\t\t\tthis.isInCall = status;\n\t\t});\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","// user account page\n\nimport { Component } from '@angular/core';\nimport { LoginService } from '../../services';\n\n@Component({\n\tselector: 'page-account',\n\ttemplateUrl: 'account.html'\n})\nexport class AccountPage {\n\tpublic user = null\n\n\tconstructor(public loginService: LoginService) {\n\t\tthis.user = this.loginService.user;\n\t}\n\n\tlogout() {\n\t\tthis.loginService.logout();\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/account/account.ts","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ws (ignored)\n// module id = 446\n// module chunks = 0","// handles incoming and outgoing text messages\n\nimport { Injectable, ApplicationRef, NgZone } from '@angular/core';\nimport { SocketService, ContactService } from './';\nimport { Config } from '../app/config';\nimport { Events } from 'ionic-angular';\nimport * as marked from 'marked';\n\n@Injectable()\nexport class ChatService {\n\tuser = null\n\tchats = []\n\n\t// manages chats\n\tconstructor(private zone:NgZone, private ref: ApplicationRef, private socket: SocketService, private events: Events, private contactService: ContactService) {\n\t\tlet evts = events;\n\n\t\tmarked.setOptions({\n\t\t\tsanitize: true,\n\t\t\tgfm: true\n\t\t});\n\n\t\t// triggered after a successfull login\n\t\tthis.events.subscribe('user.login', data => {\n\t\t\tthis.user = data.user;\n\t\t});\n\n\t\tlet self = this;\n\n\t\t// broadcast an event when there is a chat mesasage recieved\n\t\t// another way to do this would be to forward the message directly\n\t\tthis.socket.on('chat-message', function(name, message) {\n\t\t\tconsole.debug('SOCKET chat-message');\n\t\t\tlet have = false;\n\n\t\t\t\tfor (let chat of self.chats) {\n\t\t\t\t\tif (message.chat == chat.id) {\n\t\t\t\t\t\thave = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// get a new list of chats if we are missing something\n\t\t\tif (!have) {\n\t\t\t\tconsole.debug('getting new chats...');\n\t\t\t\tself.socket.emit('chats');\n\t\t\t}\n\n\t\t\tself.updateLastMessage(message.chat, message);\n\t\t\tevts.publish('chat-message', name, message);\n\t\t});\n\n\t\t// triggered where there is an update to the chat data. like adding a user to the chat\n\t\tthis.socket.on('chat', chat => {\n\t\t\t//zone.run(() => {\n\t\t\t\tconsole.debug('got a new chat update:', chat)\n\t\t\t\tfor (let c of this.chats) {\n\t\t\t\t\tif (c.id == chat.id) {\n\t\t\t\t\t\tc.users = chat.users;\n\t\t\t\t\t\tc.lastMessage = chat.lastMessage;\n\t\t\t\t\t\tc.lastDate = chat.lastDate;\n\t\t\t\t\t\tif (Config.markdown) {\n\t\t\t\t\t\t\tc.lastMarked = self.parseMessage(chat.lastMessage);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.processChats();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.chats.push(chat);\n\t\t\t\tthis.processChats();\n\t\t\t//});\n\t\t});\n\n\t\tthis.socket.on('chats', chats => {\n\t\t\tzone.run(() => {\n\t\t\t\tconsole.debug('Chats: ', chats);\n\n\t\t\t\t// merge new chats to the chat array but dont replace the array itself\n\t\t\t\tfor (let chat of chats) {\n\t\t\t\t\tlet i = true;\n\t\t\t\t\tfor (let c of this.chats) {\n\t\t\t\t\t\tif (c.id == chat.id) {\n\t\t\t\t\t\t\ti = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (i) {\n\t\t\t\t\t\tthis.chats.push(chat);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (Config.markdown) {\n\t\t\t\t\tfor (let chat of this.chats) {\n\t\t\t\t\t\tchat.lastMarked = this.parseMessage(chat.lastMessage);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.processChats();\n\t\t\t});\n\t\t});\n\t}\n\n\tprivate parseMessage(message) {\n\t\tif (!message) {\n\t\t\treturn null;\n\t\t}\n\t\tconsole.debug('parsing ', message)\n\t\tlet m = '';\n\t\tif (Config.markdown) {\n\t\t\tm = marked.parse(message);\n\t\t}\n\t\tm = m ? m.replace(/\\<img.+\\\">/i, 'Image') : null;\n\t\tm = m.replace(/(<([^>]+)>)/ig,'');\n\t\treturn m;\n\t}\n\n\tprivate processChats() {\n\t\tfor (let chat of this.chats) {\n\t\t\tchat.name = this.chatName(chat);\n\t\t}\n\t\tthis.chats.sort(this.sortChats);\n\t\tthis.ref.tick();\n\t}\n\n\t// update the last message send for the chats view\n\tpublic updateLastMessage(id, message, date = new Date) {\n\t\tfor (let c in this.chats) {\n\t\t\tlet chat = this.chats[c];\n\t\t\tif (chat.id == id) {\n\t\t\t\tchat.lastMessage = message ? message.message : 'Attachment';\n\t\t\t\tchat.lastDate = date;\n\t\t\t\tif (Config.markdown) {\n\t\t\t\t\tchat.lastMarked = this.parseMessage(chat.lastMessage);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tthis.chats.sort(this.sortChats);\n\t}\n\n\tpublic getChatById(id) {\n\t\tfor (let chat of this.chats) {\n\t\t\tif (chat.id == id) {\n\t\t\t\treturn chat;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic getChatByContact(id) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tfor (let chat of this.chats) {\n\t\t\t\tif (chat.users.length == 2 && chat.users.indexOf(this.user.id) > -1 && chat.users.indexOf(id) > -1) {\n\t\t\t\t\tresolve(chat);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.socket.promise('get-contact-chat', {id: id}).then(chat => {\n\t\t\t\tthis.chats.push(chat);\n\t\t\t\tthis.chats.sort(this.sortChats);\n\t\t\t\tresolve(chat);\n\t\t\t});\n\t\t});\n\t}\n\n\t// sort cchats by last message\n\tprivate sortChats(a, b) {\n\t\tif (!a) {\n\t\t\treturn -1;\n\t\t}\n\t\tif (!b) {\n\t\t\treturn 1;\n\t\t}\n\t\tif (new Date(a.lastDate) > new Date(b.lastDate)) {\n\t\t\treturn -1;\n\t\t}\n\t\tif (new Date(a.lastDate) < new Date(b.lastDate)) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t};\n\n\tget(chatId) {\n\t\tlet self = this;\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.socket.promise('chat', {\n\t\t\t\tchat: chatId\n\t\t\t}).then((data: any) => {\n\t\t\t\tresolve(data);\n\t\t\t});\n\t\t});\n\t}\n\n\taddContact(chat, contact) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.socket.promise('add-to-chat', {chat: chat.id, contact: contact.id}).then(chat => {\n\t\t\t\tresolve(chat);\n\t\t\t});\n\t\t});\n\t}\n\n\tchatName(chat) {\n\t\tlet name = '';\n\t\tfor (let c of chat.users) {\n\t\t\tif (c == this.user.id) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tname += (name ? ', ' : '') + (this.contactService.get(c).name || this.contactService.get(c).username)\n\t\t}\n\t\treturn name;\n\t}\n\n\t// send a new message to another contact\n\tsend(id, message, attachment) {\n\t\tconsole.debug('send chatid:', id)\n\t\t// @todo: make a promise so we know when it has fully been sent\n\t\tthis.socket.emit('message', id, message, attachment);\n\t}\n\n\t// @todo: typing\n\ttyping() {\n\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/chat.ts","// handle login and authenticaion for users\n\nimport { Injectable, ViewChild } from '@angular/core';\nimport { Events, Nav, NavController, AlertController, App, Platform } from 'ionic-angular';\nimport { AudioService, SocketService, ContactService } from './';\n\nimport { LoginPage } from '../pages';\n\nimport { Storage } from '@ionic/storage';\n\n\n@Injectable()\nexport class LoginService {\n\n\tuser = null\n\tplayLoginSound = true\n\tcomplete = null\n\n\tprivate nav:NavController;\n\n\tconstructor(private contactService: ContactService, public platform: Platform, app: App, public audio: AudioService, public socket: SocketService, public events: Events, public alertCtrl: AlertController, public storage: Storage) {\n\n\t\tthis.complete = this.makeComplete();\n\n\t\tthis.nav = app.getActiveNav();\n\n\t\t// authenticate using jwt once socket is connected\n\t\tthis.socket.on('connect', socket => {\n\t\t\tthis.auth(false);\n\t\t});\n\n\t\t// unused\n\t\tthis.socket.on('disconnect', socket => {\n\t\t});\n\n\t\t// triggered when the user logs in\n\t\tthis.events.subscribe('user.login', data => {\n\t\t\tthis.user = data.user;\n\t\t});\n\t}\n\n\t// authenticate a user using jwt\n\tpublic auth(force) {\n\t\tlet complete = token => {\n\t\t\tconsole.debug('REAL TOKEN', token);\n\t\t\tif (token) {\n\t\t\t\ttoken = token.token;\n\t\t\t}\n\t\t\tconsole.debug('token', token);\n\n\t\t\tif (!this.user) {\n\t\t\t\tif (!token) {\n\t\t\t\t\tthis.events.publish('auth', false);\n\t\t\t\t\treturn this.go();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet done = () => {\n\t\t\t\tthis.socket.removeListener('auth_error', error);\n\t\t\t\tthis.socket.removeListener('login_successful', success);\n\t\t\t};\n\n\t\t\tlet error = message => {\n\t\t\t\tdone();\n\t\t\t\tthis.storage.remove('token');\n\t\t\t\tthis.go();\n\t\t\t\tconsole.log('error auth.');\n\t\t\t};\n\n\t\t\tlet success = (user) => {\n\t\t\t\tconsole.debug('Auth: ', user);\n\t\t\t\tdone();\n\t\t\t\tif (this.playLoginSound) {\n\t\t\t\t\tthis.playLoginSound = false;\n\t\t\t\t\tthis.audio.play('login');\n\t\t\t\t}\n\t\t\t\tthis.events.publish('user.login', {\n\t\t\t\t\tuser: user\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tthis.socket.emit('auth', token);\n\t\t\tthis.socket.on('login_successful', success);\n\t\t\tthis.socket.on('auth_error', error);\n\t\t};\n\t\tthis.storage.get('token').then(complete).catch(complete);\n\t}\n\n\t// go to the login page with no transitions\n\tpublic go() {\n\t\tthis.nav.setRoot(LoginPage, {}, {animate: false})\n\t\t//this.nav.push(LoginPage, {}, {animate: false, direction: 'forward'});\n\t}\n\n\t// perform a login from the log in page\n\tpublic login(user) {\n\t\tthis.complete = this.makeComplete();\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet done = () => {\n\t\t\t\tthis.socket.removeListener('login_error', error);\n\t\t\t\tthis.socket.removeListener('login_successful', success);\n\t\t\t};\n\n\t\t\tlet error = (message) => {\n\t\t\t\tlet alert = this.alertCtrl.create({\n\t\t\t\t\ttitle: 'Error',\n\t\t\t\t\tsubTitle: message,\n\t\t\t\t\tbuttons: ['OK']\n\t\t\t\t});\n\t\t\t\talert.present();\n\t\t\t\tdone();\n\n\t\t\t\t//reject('login fail');\n\t\t\t};\n\n\t\t\tlet success = (user, token) => {\n\t\t\t\tconsole.debug('Login: ', user);\n\t\t\t\tif (token) {\n\t\t\t\t\tthis.storage.set('token', {token: token});\n\t\t\t\t}\n\t\t\t\tdone();\n\t\t\t\tthis.events.publish('user.login', {\n\t\t\t\t\tuser: user\n\t\t\t\t});\n\t\t\t\tif (this.playLoginSound) {\n\t\t\t\t\tthis.playLoginSound = false;\n\t\t\t\t\tthis.audio.play('login');\n\t\t\t\t}\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tthis.socket.on('login_error', error);\n\t\t\tthis.socket.on('login_successful', success);\n\t\t\tthis.socket.emit('login', user);\n\t\t});\n\t}\n\n\t// log the user out\n\tpublic logout() {\n\t\tthis.playLoginSound = true;\n\t\tthis.storage.remove('token');\n\t\tthis.user = null;\n\t\t//$rootScope.contacts.length = 0;\n\t\tthis.contactService.contacts.length = 0;\n\t\tthis.events.publish('user.logout');\n\t\tthis.go();\n\t\tthis.socket.emit('logout', null);\n\t\tthis.complete = this.makeComplete();\n\t}\n\n\t// a promise that fires once we have logged in\n\t// used by controllers\n\tpublic makeComplete() {\n\t\tlet self = this;\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (self.user) {\n\t\t\t\tresolve(self.user);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar cleanA = self.events.subscribe('user.login', data => {\n\t\t\t\t//cleanA(); cleanB();\n\t\t\t\tresolve(data.user);\n\t\t\t});\n\t\t\tvar cleanB = self.events.subscribe('auth', () => {\n\t\t\t\t//cleanA(); cleanB();\n\t\t\t\t//reject('auth fail');\n\t\t\t});\n\t\t});\n\t};\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/login.ts","// handle s3 uploads\n\nimport { Injectable } from '@angular/core';\nimport { Platform, Events } from 'ionic-angular';\nimport { Config } from '../app/config';\nimport { SocketService } from '../services';\nimport { Http, Response, Headers, RequestOptions } from '@angular/http';\n\n@Injectable()\nexport class AttachmentService {\n\tconstructor(public platform: Platform, private socket: SocketService, private http: Http, private events: Events) {\n\n\t}\n\n\tpublic upload(up) {\n\n\n\t\t//var fileReader = new FileReader();\n\t\t//fileReader.readAsDataURL(file);\n\n\t\t// if its a video, we need to make a thumbnail\n\t\t/*\n\t\tif (file.indexOf('video') > -1) {\n\t\t\tlet fileReader = new FileReader();\n\t\t\tfileReader.onload = () => {\n\t\t\t\tlet blob = new Blob([fileReader.result], {type: file.type});\n\t\t\t\tlet url = URL.createObjectURL(blob);\n\t\t\t\tlet video = document.createElement('video');\n\t\t\t\tlet timeupdate = () => {\n\t\t\t\t\tif (snapImage()) {\n\t\t\t\t\t\tvideo.removeEventListener('timeupdate', timeupdate);\n\t\t\t\t\t\tvideo.pause();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tvideo.addEventListener('loadeddata', () => {\n\t\t\t\t\tif (snapImage()) {\n\t\t\t\t\t\tvideo.removeEventListener('timeupdate', timeupdate);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlet snapImage = () => {\n\t\t\t\t\tlet canvas = document.createElement('canvas');\n\t\t\t\t\tcanvas.width = video.videoWidth;\n\t\t\t\t\tcanvas.height = video.videoHeight;\n\t\t\t\t\tcanvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);\n\t\t\t\t\tlet image = canvas.toDataURL();\n\t\t\t\t\tlet success = image.length > 100000;\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tlet img = document.createElement('img');\n\t\t\t\t\t\timg.src = image;\n\t\t\t\t\t}\n\t\t\t\t\treturn success;\n\t\t\t\t};\n\n\t\t\t\tvideo.addEventListener('timeupdate', timeupdate);\n\t\t\t\tvideo.preload = 'metadata';\n\t\t\t\tvideo.src = url;\n\t\t\t\tvideo.muted = true;\n\t\t\t\tvideo.play();\n\n\t\t\t\tfileReader.readAsArrayBuffer(file);\n\t\t\t}\n\n\t\t}\n\n\t\t*/\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet request = {\n\t\t\t\tname: up.file.name,\n\t\t\t\ttype: up.file.type,\n\t\t\t\tchat: up.chat.id\n\t\t\t}\n\n\t\t\tlet self = this;\n\n\t\t\tthis.socket.promise('s3-sign', request).then((res: any) => {\n\t\t\t\tconsole.debug('got response: ', res)\n\n\t\t\t\tself.http.put(res.signed, up.file).subscribe(\n\t\t\t\t\tdata => {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\turl: res.url,\n\t\t\t\t\t\t\ttype: up.file.type,\n\t\t\t\t\t\t\tname: up.file.name,\n\t\t\t\t\t\t\tid: res.id\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\terr => reject('Error uploading file: ' + err),\n\t\t\t\t\t() => console.log('Successfully uploaded file: ', res)\n\t\t\t\t);\n\n\n\t\t\t\t/* old way of doing things for reference\n\n\t\t\t\tconst xhr = new XMLHttpRequest();\n\t\t\t\txhr.open('PUT', res.signedRequest);\n\t\t\t\txhr.onreadystatechange = () => {\n\t\t\t\t\tif (xhr.readyState === 4) {\n\t\t\t\t\t\tif (xhr.status === 200) {\n\t\t\t\t\t\t\tresolve(res.url);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treject('error uploading');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\txhr.send(file);\n\t\t\t\t*/\n\t\t\t});\n\t\t});\n\t}\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/services/attachment.ts","import { Component, NgZone } from '@angular/core';\nimport { NavController, Events } from 'ionic-angular';\nimport { ChatPage, AccountPage, ContactsPage } from '../';\nimport { ContactModal } from '../../components';\nimport { LoginService, ChatService } from '../../services';\n\n@Component({\n\tselector: 'page-chats',\n\ttemplateUrl: 'chats.html'\n})\nexport class ChatsPage {\n\tconstructor(private zone: NgZone, private events:Events, public chatService: ChatService, private navCtrl: NavController, private loginService: LoginService) {\n\t\t// contacts / chats list state\n\t\tloginService.complete.then(user => {\n\t\t\tconsole.debug('login complete');\n\t\t\tif (!user.id) {\n\t\t\t\tloginService.go();\n\t\t\t}\n\t\t}, () => {\n\t\t\tconsole.debug('login fail');\n\t\t\tloginService.go();\n\t\t});\n\t}\n\n\t// go to accounts\n\taccount() {\n\t\tthis.navCtrl.push(AccountPage, {}, {animate: true, direction: 'forward'});\n\t}\n\n\t// go to a chat\n\tchat(id) {\n\t\tthis.navCtrl.push(ChatPage, {chatId: id}, {animate: true, direction: 'forward'});\n\t}\n\n\tgoContacts() {\n\t\tthis.navCtrl.setRoot(ContactsPage, {}, {animate: true, direction: 'back'});\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chats/chats.ts","// login and signup page\n\nimport { Component } from '@angular/core';\nimport { NavController } from 'ionic-angular';\nimport { LoginService } from '../../services';\nimport { ChatsPage } from '../';\n\ndeclare var window:any;\n\n@Component({\n\tselector: 'page-login',\n\ttemplateUrl: 'login.html'\n})\nexport class LoginPage {\n\tfocus = false\n\tinput = false\n\tdata = {\n\t\tusername:null,\n\t\tpassword: null\n\t}\n\n\tconstructor(private navCtrl: NavController, private loginService: LoginService) {\n\t\t// forward to chats if we are already logged in\n\t\tloginService.complete.then(user => {\n\t\t\t// we dont need to do this since its handled in the login function, but just in case you want to do it here\n\t\t\t//this.navCtrl.push(ChatsPage, {}, {animate: true, direction: 'forward'});\n\t\t});\n\t}\n\n\t// begin the login\n\tlogin() {\n\t\tthis.loginService.login(this.data).then(() => {\n\t\t\tthis.navCtrl.setRoot(ChatsPage, {}, {animate: true, direction: 'forward'});\n\t\t}, data => {\n\t\t\tconsole.log(data);\n\t\t});\n\t};\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts","// chat detail page\n\nimport { Component, ViewChild } from '@angular/core';\nimport { NavParams, Content, Events, ModalController } from 'ionic-angular';\nimport { LoginService, ChatService, AudioService, ContactService, AttachmentService } from '../../services';\nimport { ContactAddModal } from '../../components';\nimport { Config } from '../../app/config';\nimport { DomSanitizer } from '@angular/platform-browser';\n\nimport { Observable } from 'rxjs/Observable';\n\n\nimport * as marked from 'marked';\n\ndeclare var document: any;\ndeclare var $: any;\n\n@Component({\n\tselector: 'page-chat',\n\ttemplateUrl: 'chat.html'\n})\nexport class ChatPage {\n\t@ViewChild(Content) content: Content;\n\n\tmodal = null\n\tanimateChat = false\n\tsending = false\n\tmessages = []\n\tdata = {\n\t\tmessage: null,\n\t\tattachment: null,\n\t\tattachmentData: null\n\t}\n\tchat = {\n\t\tid: null,\n\t\tusers: [],\n\t\tname: '',\n\t\tmessages: []\n\t}\n\tmessageHandleWrap = null\n\tattachments = Config.attachments;\n\n\tconstructor(private sanitizer: DomSanitizer, private attachment: AttachmentService, public contactService: ContactService, private modalCtrl: ModalController, private events: Events, params: NavParams, private loginService: LoginService, private chatService: ChatService, private audioService: AudioService) {\n\t\tconsole.debug('Viewing chat: ', params.get('chatId'));\n\n\t\tmarked.setOptions({\n\t\t\tsanitize: true,\n\t\t\tgfm: true\n\t\t});\n\n\t\tthis.chat = this.chatService.getChatById(params.get('chatId'));\n\n\t\t// if we refreshed on this page, then go back to chats\n\t\tif (!loginService.user) {\n\t\t\tloginService.go();\n\t\t\treturn;\n\t\t}\n\n\t\t// get chat details\n\t\tthis.chatService.get(params.get('chatId')).then((data: any) => {\n\t\t\tconsole.debug('Recieved chat messages: ', data)\n\t\t\tthis.chat.messages = data.messages;\n\n\t\t\tif (data && data.messages && data.messages.length) {\n\t\t\t\tdata.messages.map(m => {\n\t\t\t\t\tthis.addMessage(m);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.content.scrollToBottom(0);\n\t\t\t});\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.content.scrollToBottom(0);\n\t\t\t\tthis.animateChat = true;\n\t\t\t}, 10);\n\t\t});\n\t}\n\n\tprivate handleMessage(name, data) {\n\t\tconsole.debug('new message: ', name, data)\n\t\tif (data.chat == this.chat.id) {\n\t\t\tthis.addMessage(data);\n\t\t\tthis.content.scrollToBottom(300);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.content.scrollToBottom(300);\n\t\t\t\tthis.animateChat = true;\n\t\t\t}, 100);\n\t\t\tthis.audioService.play('message-received-front');\n\t\t} else {\n\t\t\tthis.audioService.play('message-received-back');\n\t\t}\n\t}\n\n\taddMessage(message) {\n\t\tthis.messages.push(message);\n\t\tif (Config.markdown) {\n\t\t\tmessage.marked = message.message ? marked.parse(message.message) : null;\n\t\t}\n\t\tvar prev = null;\n\t\tfor (let message of this.messages) {\n\t\t\tif (message.from != prev) {\n\t\t\t\tprev = message.from;\n\t\t\t\tmessage.first = true;\n\t\t\t}\n\t\t}\n\t}\n\n\t// send a message\n\tsend() {\n\t\tlet check = false;\n\t\tif (Config.markdown) {\n\t\t\tcheck = this.data.attachmentData || (this.data.message && marked.parse(this.data.message));\n\t\t} else {\n\t\t\tcheck = this.data.attachmentData || this.data.message;\n\t\t}\n\n\t\tif (!check) {\n\t\t\tconsole.debug('No message to send: ', this.data.message);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.sending = true;\n\t\t//this.blurInput(null);\n\n\t\tconsole.debug('Sending message ', this.data.message)\n\t\tthis.audioService.play('message-sent');\n\t\tthis.chatService.send(this.chat.id, this.data.message, this.data.attachmentData);\n\n\t\tthis.addMessage({\n\t\t\tattachment: this.data.attachmentData,\n\t\t\tmessage: this.data.message,\n\t\t\tfrom: this.loginService.user.id\n\t\t});\n\n\t\tthis.chatService.updateLastMessage(this.chat.id, this.data.message);\n\t\tthis.data.message = null;\n\t\tthis.data.attachmentData = null;\n\t\tthis.data.attachment = '';\n\n\t\tsetTimeout(() => {\n\t\t\tthis.content.scrollToBottom(300);\n\t\t\tthis.sending = false;\n\t\t}, 100)\n\t};\n\n\t// add a contact to the chat\n\taddContact() {\n\t\tlet modal = this.modalCtrl.create(ContactAddModal);\n\t\tmodal.onDidDismiss(data => {\n\t\t\tconsole.log(data);\n\t\t\tif (data) {\n\t\t\t\tthis.chatService.addContact(this.chat, data);\n\t\t\t}\n\t\t});\n\t\tmodal.present();\n\t}\n\n\t// keep the input focused.\n\t// for some reason it works best if this is separate from the send function\n\tblurInput(e) {\n\t\t//console.log(e);\n\t\tif (!this.sending) {\n\t\t\treturn;\n\t\t}\n\t\tsetTimeout(() => {\n\t\t\t$('#messageBox input').focus();\n\t\t}, 10);\n\t\tsetTimeout(() => {\n\t\t\t$('#messageBox input').focus();\n\t\t}, 1);\n\t\t$('#messageBox input').focus();\n\t}\n\n\tngOnInit() {\n\t\t// watch for incoming chat events and add it to the cleanup queue\n\t\tthis.messageHandleWrap = (a, b) => {\n\t\t\tthis.handleMessage(a,b);\n\t\t}\n\t\tthis.events.subscribe('chat-message', this.messageHandleWrap);\n\t}\n\n\tngOnDestroy() {\n\t\tthis.events.unsubscribe('chat-message', this.messageHandleWrap);\n\t}\n\n\tupload(e:any) {\n        let file = e.target.files[0];\n\n\t\tthis.attachment.upload({\n\t\t\tfile: file,\n\t\t\tchat: this.chat\n\t\t}).then(res => {\n\t\t\tthis.data.message = null;\n\t\t\tthis.data.attachmentData = res;\n\t\t\tconsole.debug('Uploaded file: ', res);\n\t\t\tthis.send();\n\t\t});\n        console.debug(file);\n\t}\n\n\tplay(e:any) {\n\t\te.target.currentTime = 0;\n\t\te.target.play();\n\t}\n\n\tpause(e:any) {\n\t\te.target.pause();\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat/chat.ts","// call modal display\n\nimport { Component, Input } from '@angular/core';\nimport { ModalController, NavParams, Events, ViewController} from 'ionic-angular';\nimport { CallService } from '../../services/call';\n\n@Component({\n\ttemplateUrl: 'call-modal.html',\n\tselector: 'modal-call'\n})\nexport class CallModal {\n\tconstructor(params: NavParams, private events: Events, private viewCtrl: ViewController, public callService: CallService) {\n\t\tthis.events.subscribe('call.trigger.hide', data => {\n\t\t\tthis.hide();\n\t\t});\n\t}\n\n\thide() {\n\t\tthis.events.publish('call.status.isincall', false);\n\t\tthis.callService.refreshVideos();\n\t\tthis.viewCtrl.dismiss();\n\t}\n\n\tngOnInit() {\n\t\tthis.events.publish('call.status.isincall', true);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/call-modal/call-modal.ts","// long press for small contact modal\n\nimport { Component } from '@angular/core';\nimport { NavController, NavParams, ViewController } from 'ionic-angular';\nimport { ChatPage } from '../../pages';\nimport { CallService, ContactService } from '../../services';\n\n@Component({\n\ttemplateUrl: 'contact-modal.html',\n\tselector: 'modal-contact'\n})\nexport class ContactModal {\n\tcontact = null\n\tconstructor(private viewCtrl: ViewController, private params: NavParams, private navCtrl: NavController, private callService: CallService, private contactService: ContactService) {\n\t}\n\n\tchat() {\n\t\tthis.navCtrl.push(ChatPage, {chatId: this.contact.id}, {animate: true, direction: 'forward'});\n\t\tthis.cancel();\n\t}\n\n\tcall() {\n\t\tthis.callService.triggerCall(this.contact.id);\n\t\tthis.cancel();\n\t}\n\n\tcancel() {\n\t\tthis.viewCtrl.dismiss();\n\t}\n\n\tngOnInit() {\n\t\tthis.contact = this.contactService.get(this.params.get('contact').id);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/contact-modal/contact-modal.ts","// add contact to a chat modeal\n\nimport { Component } from '@angular/core';\nimport { ModalController, ViewController } from 'ionic-angular';\nimport { ContactModal } from '../../components';\nimport { ContactService } from '../../services';\n\n@Component({\n\ttemplateUrl: 'contact-add-modal.html',\n\tselector: 'modal-add-contact'\n})\nexport class ContactAddModal {\n\tcontacts = []\n\n\tconstructor(private viewCtrl: ViewController, private modalCtrl: ModalController, private contactService: ContactService) {\n\t\tthis.contacts = contactService.contacts;\n\t}\n\n\tclose() {\n\t\tthis.viewCtrl.dismiss();\n\t}\n\n\t// tap and hold contact card\n\tcontactCard(contact) {\n\t\tlet modal = this.modalCtrl.create(ContactModal, {contact: contact});\n\t\tmodal.present();\n\t}\n\n\tadd(contact) {\n\t\tthis.viewCtrl.dismiss(contact);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/contact-add-modal/contact-add-modal.ts","// display a user image, or set of user images\n\nimport { Component, Input } from '@angular/core';\nimport { ContactService } from '../../services/contact';\n\n@Component({\n\ttemplate: '<div class=\"user-image-container user-img-{{single}} user-img-count{{contacts.length}}\"><img src=\"{{c.imagePath}}\" class=\"user-img-{{single}}\" *ngFor=\"let c of contacts\"></div>',\n\tselector: 'user-image'\n})\n\nexport class UserImage {\n\t@Input() contact\n\t@Input() hideSelf = false\n\tsingle = null\n\tcontacts = []\n\n\tconstructor(private contactService: ContactService) {\n\t}\n\n\tngOnInit() {\n\t\tif (!this.contact) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!(this.contact instanceof Array)) {\n\t\t\tthis.contact = [this.contact];\n\t\t}\n\n\t\tfor (let contact of this.contact) {\n\t\t\tlet getContact = null;\n\t\t\tif (typeof contact == 'string') {\n\t\t\t\tgetContact = this.contactService.get(contact);\n\t\t\t\tif (!getContact) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tgetContact = contact;\n\t\t\t}\n\n\t\t\tif (this.hideSelf && this.contactService.user.id == getContact.id) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (getContact.image) {\n\t\t\t\tgetContact.imagePath = 'assets/img/avatar/' + getContact.image;\n\t\t\t}\n\n\t\t\tthis.contacts.push(getContact);\n\t\t}\n\n\t\tthis.single = this.contacts.length > 1 ? 'multi' : 'single';\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/user-image/user-image.ts","// created to prevent circular dependencies on CallService and CallModal\n\nimport { Injectable } from '@angular/core';\nimport { ModalController, Events, ViewController} from 'ionic-angular';\nimport { CallModal } from '../../components';\n\n@Injectable()\nexport class CallModalTrigger {\n\tmodal = null\n\n\tconstructor(private events: Events, private modalCtrl: ModalController) {\n\t\tlet self = this;\n\t\tthis.events.subscribe('call.trigger.show', data => {\n\t\t\tconsole.debug('SHOWING CALL FROM EVENT')\n\t\t\tself.call();\n\t\t});\n\t}\n\n\tpublic call() {\n\t\tthis.modal = this.modalCtrl.create(CallModal);\n\t\tthis.modal.present();\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/call-modal/call-modal-trigger.ts","import { Directive, ElementRef, Input } from '@angular/core';\nimport { Content, Platform } from 'ionic-angular';\nimport { Keyboard } from '@ionic-native/keyboard';\nimport { Subscription } from 'rxjs/rx';\n\n\n/**\n * @name KeyboardAttachDirective\n * @description\n * The `keyboardAttach` directive will cause an element to float above the\n * keyboard when the keyboard shows. Currently only supports the `ion-footer` element.\n *\n * ### Notes\n * - This directive requires [Ionic Native](https://github.com/driftyco/ionic-native)\n * and the [Ionic Keyboard Plugin](https://github.com/driftyco/ionic-plugin-keyboard).\n * - Currently only tested to work on iOS.\n * - If there is an input in your footer, you will need to set\n *   `Keyboard.disableScroll(true)`.\n *\n * @usage\n *\n * ```html\n * <ion-content #content>\n * </ion-content>\n *\n * <ion-footer [keyboardAttach]=\"content\">\n *   <ion-toolbar>\n *     <ion-item>\n *       <ion-input></ion-input>\n *     </ion-item>\n *   </ion-toolbar>\n * </ion-footer>\n * ```\n */\n\n@Directive({\n\tselector: '[keyboardAttach]'\n})\nexport class KeyboardAttach {\n\t@Input('keyboardAttach') content: Content;\n\n\tprivate onShowSubscription: any;\n\tprivate onHideSubscription: any;\n\n\tconstructor(\n\t\tprivate elementRef: ElementRef,\n\t\tprivate platform: Platform,\n\t\tprivate keyboard: Keyboard\n\t) {\n\t\tif (this.platform.is('cordova') && this.platform.is('ios')) {\n\t\t\tthis.onShowSubscription = this.keyboard.onKeyboardShow().subscribe(e => this.onShow(e));\n\t\t\tthis.onHideSubscription = this.keyboard.onKeyboardHide().subscribe(() => this.onHide());\n\t\t}\n\t}\n\n\tngOnDestroy() {\n\t\tif (this.onShowSubscription) {\n\t\t\tthis.onShowSubscription.unsubscribe();\n\t\t}\n\t\tif (this.onHideSubscription) {\n\t\t\tthis.onHideSubscription.unsubscribe();\n\t\t}\n\t}\n\n\tprivate onShow(e) {\n\t\tlet keyboardHeight: number = e.keyboardHeight || (e.detail && e.detail.keyboardHeight);\n\t\tthis.setElementPosition(keyboardHeight);\n\t};\n\n\tprivate onHide() {\n\t\tthis.setElementPosition(0);\n\t};\n\n\tprivate setElementPosition(pixels: number) {\n\t\tthis.elementRef.nativeElement.style.paddingBottom = pixels + 'px';\n\t\tthis.content.resize();\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/keyboard-attach/keyboard-attach.ts","// display list of contacts\n\nimport { Component } from '@angular/core';\nimport { NavController, ModalController } from 'ionic-angular';\nimport { ChatPage, AccountPage, ChatsPage } from '../';\nimport { ContactModal } from '../../components';\nimport { LoginService, ContactService, ChatService } from '../../services';\n\n@Component({\n\tselector: 'page-contacts',\n\ttemplateUrl: 'contacts.html'\n})\nexport class ContactsPage {\n\n\tconstructor(private chatService: ChatService, private modalCtrl: ModalController, private navCtrl: NavController, private loginService: LoginService, public contactService: ContactService) {\n\t\t// contacts / chats list state\n\t\tloginService.complete.then(user => {\n\t\t\tconsole.debug('login complete');\n\t\t\tif (!user.id) {\n\t\t\t\tloginService.go();\n\t\t\t}\n\t\t}, () => {\n\t\t\tconsole.debug('login faile');\n\t\t\tloginService.go();\n\t\t});\n\n\t\tconsole.debug('Contacts: ', contactService.contacts);\n\t}\n\n\t// tap and hold contact card\n\tcontactCard(contact) {\n\t\tlet modal = this.modalCtrl.create(ContactModal, {contact: contact});\n\t\tmodal.present();\n\t}\n\n\t// go to accounts\n\taccount() {\n\t\tthis.navCtrl.push(AccountPage, {}, {animate: true, direction: 'forward'});\n\t}\n\n\t// go to a chat\n\tchat(id) {\n\t\tthis.chatService.getChatByContact(id).then((chat:any) => {\n\t\t\tconsole.debug('Pushing to chat: ', chat)\n\t\t\tthis.navCtrl.push(ChatPage, {chatId: chat.id}, {animate: true, direction: 'forward'});\n\t\t});\n\t}\n\n\tgoChats(id) {\n\t\tthis.navCtrl.setRoot(ChatsPage, {}, {animate: true, direction: 'forward'});\n\t}\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/contacts/contacts.ts","var map = {\n\t\"./af\": 228,\n\t\"./af.js\": 228,\n\t\"./ar\": 229,\n\t\"./ar-dz\": 230,\n\t\"./ar-dz.js\": 230,\n\t\"./ar-kw\": 231,\n\t\"./ar-kw.js\": 231,\n\t\"./ar-ly\": 232,\n\t\"./ar-ly.js\": 232,\n\t\"./ar-ma\": 233,\n\t\"./ar-ma.js\": 233,\n\t\"./ar-sa\": 234,\n\t\"./ar-sa.js\": 234,\n\t\"./ar-tn\": 235,\n\t\"./ar-tn.js\": 235,\n\t\"./ar.js\": 229,\n\t\"./az\": 236,\n\t\"./az.js\": 236,\n\t\"./be\": 237,\n\t\"./be.js\": 237,\n\t\"./bg\": 238,\n\t\"./bg.js\": 238,\n\t\"./bm\": 239,\n\t\"./bm.js\": 239,\n\t\"./bn\": 240,\n\t\"./bn.js\": 240,\n\t\"./bo\": 241,\n\t\"./bo.js\": 241,\n\t\"./br\": 242,\n\t\"./br.js\": 242,\n\t\"./bs\": 243,\n\t\"./bs.js\": 243,\n\t\"./ca\": 244,\n\t\"./ca.js\": 244,\n\t\"./cs\": 245,\n\t\"./cs.js\": 245,\n\t\"./cv\": 246,\n\t\"./cv.js\": 246,\n\t\"./cy\": 247,\n\t\"./cy.js\": 247,\n\t\"./da\": 248,\n\t\"./da.js\": 248,\n\t\"./de\": 249,\n\t\"./de-at\": 250,\n\t\"./de-at.js\": 250,\n\t\"./de-ch\": 251,\n\t\"./de-ch.js\": 251,\n\t\"./de.js\": 249,\n\t\"./dv\": 252,\n\t\"./dv.js\": 252,\n\t\"./el\": 253,\n\t\"./el.js\": 253,\n\t\"./en-au\": 254,\n\t\"./en-au.js\": 254,\n\t\"./en-ca\": 255,\n\t\"./en-ca.js\": 255,\n\t\"./en-gb\": 256,\n\t\"./en-gb.js\": 256,\n\t\"./en-ie\": 257,\n\t\"./en-ie.js\": 257,\n\t\"./en-nz\": 258,\n\t\"./en-nz.js\": 258,\n\t\"./eo\": 259,\n\t\"./eo.js\": 259,\n\t\"./es\": 260,\n\t\"./es-do\": 261,\n\t\"./es-do.js\": 261,\n\t\"./es-us\": 262,\n\t\"./es-us.js\": 262,\n\t\"./es.js\": 260,\n\t\"./et\": 263,\n\t\"./et.js\": 263,\n\t\"./eu\": 264,\n\t\"./eu.js\": 264,\n\t\"./fa\": 265,\n\t\"./fa.js\": 265,\n\t\"./fi\": 266,\n\t\"./fi.js\": 266,\n\t\"./fo\": 267,\n\t\"./fo.js\": 267,\n\t\"./fr\": 268,\n\t\"./fr-ca\": 269,\n\t\"./fr-ca.js\": 269,\n\t\"./fr-ch\": 270,\n\t\"./fr-ch.js\": 270,\n\t\"./fr.js\": 268,\n\t\"./fy\": 271,\n\t\"./fy.js\": 271,\n\t\"./gd\": 272,\n\t\"./gd.js\": 272,\n\t\"./gl\": 273,\n\t\"./gl.js\": 273,\n\t\"./gom-latn\": 274,\n\t\"./gom-latn.js\": 274,\n\t\"./gu\": 275,\n\t\"./gu.js\": 275,\n\t\"./he\": 276,\n\t\"./he.js\": 276,\n\t\"./hi\": 277,\n\t\"./hi.js\": 277,\n\t\"./hr\": 278,\n\t\"./hr.js\": 278,\n\t\"./hu\": 279,\n\t\"./hu.js\": 279,\n\t\"./hy-am\": 280,\n\t\"./hy-am.js\": 280,\n\t\"./id\": 281,\n\t\"./id.js\": 281,\n\t\"./is\": 282,\n\t\"./is.js\": 282,\n\t\"./it\": 283,\n\t\"./it.js\": 283,\n\t\"./ja\": 284,\n\t\"./ja.js\": 284,\n\t\"./jv\": 285,\n\t\"./jv.js\": 285,\n\t\"./ka\": 286,\n\t\"./ka.js\": 286,\n\t\"./kk\": 287,\n\t\"./kk.js\": 287,\n\t\"./km\": 288,\n\t\"./km.js\": 288,\n\t\"./kn\": 289,\n\t\"./kn.js\": 289,\n\t\"./ko\": 290,\n\t\"./ko.js\": 290,\n\t\"./ky\": 291,\n\t\"./ky.js\": 291,\n\t\"./lb\": 292,\n\t\"./lb.js\": 292,\n\t\"./lo\": 293,\n\t\"./lo.js\": 293,\n\t\"./lt\": 294,\n\t\"./lt.js\": 294,\n\t\"./lv\": 295,\n\t\"./lv.js\": 295,\n\t\"./me\": 296,\n\t\"./me.js\": 296,\n\t\"./mi\": 297,\n\t\"./mi.js\": 297,\n\t\"./mk\": 298,\n\t\"./mk.js\": 298,\n\t\"./ml\": 299,\n\t\"./ml.js\": 299,\n\t\"./mr\": 300,\n\t\"./mr.js\": 300,\n\t\"./ms\": 301,\n\t\"./ms-my\": 302,\n\t\"./ms-my.js\": 302,\n\t\"./ms.js\": 301,\n\t\"./my\": 303,\n\t\"./my.js\": 303,\n\t\"./nb\": 304,\n\t\"./nb.js\": 304,\n\t\"./ne\": 305,\n\t\"./ne.js\": 305,\n\t\"./nl\": 306,\n\t\"./nl-be\": 307,\n\t\"./nl-be.js\": 307,\n\t\"./nl.js\": 306,\n\t\"./nn\": 308,\n\t\"./nn.js\": 308,\n\t\"./pa-in\": 309,\n\t\"./pa-in.js\": 309,\n\t\"./pl\": 310,\n\t\"./pl.js\": 310,\n\t\"./pt\": 311,\n\t\"./pt-br\": 312,\n\t\"./pt-br.js\": 312,\n\t\"./pt.js\": 311,\n\t\"./ro\": 313,\n\t\"./ro.js\": 313,\n\t\"./ru\": 314,\n\t\"./ru.js\": 314,\n\t\"./sd\": 315,\n\t\"./sd.js\": 315,\n\t\"./se\": 316,\n\t\"./se.js\": 316,\n\t\"./si\": 317,\n\t\"./si.js\": 317,\n\t\"./sk\": 318,\n\t\"./sk.js\": 318,\n\t\"./sl\": 319,\n\t\"./sl.js\": 319,\n\t\"./sq\": 320,\n\t\"./sq.js\": 320,\n\t\"./sr\": 321,\n\t\"./sr-cyrl\": 322,\n\t\"./sr-cyrl.js\": 322,\n\t\"./sr.js\": 321,\n\t\"./ss\": 323,\n\t\"./ss.js\": 323,\n\t\"./sv\": 324,\n\t\"./sv.js\": 324,\n\t\"./sw\": 325,\n\t\"./sw.js\": 325,\n\t\"./ta\": 326,\n\t\"./ta.js\": 326,\n\t\"./te\": 327,\n\t\"./te.js\": 327,\n\t\"./tet\": 328,\n\t\"./tet.js\": 328,\n\t\"./th\": 329,\n\t\"./th.js\": 329,\n\t\"./tl-ph\": 330,\n\t\"./tl-ph.js\": 330,\n\t\"./tlh\": 331,\n\t\"./tlh.js\": 331,\n\t\"./tr\": 332,\n\t\"./tr.js\": 332,\n\t\"./tzl\": 333,\n\t\"./tzl.js\": 333,\n\t\"./tzm\": 334,\n\t\"./tzm-latn\": 335,\n\t\"./tzm-latn.js\": 335,\n\t\"./tzm.js\": 334,\n\t\"./uk\": 336,\n\t\"./uk.js\": 336,\n\t\"./ur\": 337,\n\t\"./ur.js\": 337,\n\t\"./uz\": 338,\n\t\"./uz-latn\": 339,\n\t\"./uz-latn.js\": 339,\n\t\"./uz.js\": 338,\n\t\"./vi\": 340,\n\t\"./vi.js\": 340,\n\t\"./x-pseudo\": 341,\n\t\"./x-pseudo.js\": 341,\n\t\"./yo\": 342,\n\t\"./yo.js\": 342,\n\t\"./zh-cn\": 343,\n\t\"./zh-cn.js\": 343,\n\t\"./zh-hk\": 344,\n\t\"./zh-hk.js\": 344,\n\t\"./zh-tw\": 345,\n\t\"./zh-tw.js\": 345\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 465;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/moment/locale ^\\.\\/.*$\n// module id = 465\n// module chunks = 0","import { Component } from '@angular/core';\n\n@Component({})\nexport class Config {\n\n\t// url of the chat server\n\t// for local development it will be something like http://192.168.0.214:9000/\n\t//public static server = 'https://ionic-video-chat-server.herokuapp.com/';\n\tpublic static server = 'http://192.168.0.15:5000/';\n\n\t// enables or disables chat sounds. usefull for development\n\tpublic static audio = true;\n\n\t// STUN/TURN ice servers for connection negotiation\n\tpublic static ice = [\n\t\t{\n\t\t\turls: 'stun:stun.l.google.com:19302'\n\t\t}, {\n\t\t\turls: 'stun:stun.services.mozilla.com'\n\t\t}, {\n\t\t\turls: 'stun:numb.viagenie.ca',\n\t\t\tusername: 'numb@arzynik.com',\n\t\t\tcredential: 'numb'\n\t\t}, {\n\t\t\turls: 'turn:numb.viagenie.ca',\n\t\t\tusername: 'numb@arzynik.com',\n\t\t\tcredential: 'numb'\n\t\t}\n\t];\n\t// if we allow attachments or not.\n\t// be sure to configure your AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY and S3_BUCKET in the server config\n\tpublic static attachments = true;\n\n\t// whether or enable markdown parsing client side\n\tpublic static markdown = true;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/config.ts"],"sourceRoot":""}